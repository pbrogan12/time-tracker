{% extends "base.html" %}
{% block nav %}
    <li class="active"><a href="{% url 'logs' %}">Activity Log</a></li>
    <li><a href="{% url 'showActivities' %}">Activities</a></li>
{% endblock %}

{% block content %}
  {% for i in logs %}
  <div class="modal fade" id="myModal{{i.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">Delete Log</h4>
        </div>
        <div class="modal-body">
            <p>Are you sure you want to delete this log.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-danger" onClick="location.href='{% url 'delLog' i.id %}';">
              Delete
              <span class="glyphicon glyphicon-remove"></button>
        </button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
  {% endfor %}
  <div class="row">
      <div class="col-md-6">
  <h1>Logs</h1>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Name</th>
                <th>Notes</th>
                <th>Time</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for i in logs %}
            <tr>
                <td>{{ i.name }}</td>
                <td>{{ i.notes }}</td>
                <td>{{ i.time }}</td>
                <td><a data-toggle="modal" href="#myModal{{i.id}}"><button type="button" class="btn btn-danger"><span class="glyphicon glyphicon-remove"></button></a>
                        <a href="{% url 'editLog' i.id %}"><button type="button" class="btn btn-primary"><span class="glyphicon glyphicon-edit"></button></a></td>
            </tr>
                        {% endfor %}
        </tbody>
    </table>
</div>
<div class="col-md-6">
    <h1>Add Log</h1>
            <form action="" method="post">{% csrf_token %}
                <table class="table table-condensed">
                    {% for field in form %}
                <tr>
                    <th>
                        {{ field.label_tag }}
                    </th>
                    <td>
                        {% if 'date' in field.label_tag %} 
                        <div class="input-group">
                            {{ field }} 
                            <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                            </span>
                            {{ field.errors }}
                        </div>
                        {% elif 'time' in field.label_tag %}
                        <div class="input-group">
                            <span class="input-group-btn">
                                <button id="startButton" class="btn btn-success" type="button">Start</button>
                                <button id="stopButton" class="btn btn-danger" type="button">Stop</button>
                            </span>
                            </span>
                            {{ field }} 
                            {{ field.errors }}
                        </div>
                        {% else %}
                            {{ field }} 
                            {{ field.errors }}
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </table>
        </form>
        <button type="button" onClick="document.forms[0].submit();return false;" class="btn btn-primary">Add log</button>
     </div>
</div>
{% endblock %}
{% block js %}
$(document).ready(function(){ 
$("input").addClass("form-control");
$("textarea").addClass("form-control");
$("#id_date").addClass("datepicker");
$("#id_date").attr('value', '{% now 'Y-m-d' %}');
$("#id_date").attr('data-date', '{% now 'Y-m-d' %}');
$("#id_date").attr('data-date-format', 'yyyy-mm-dd');
$('.datepicker').datepicker({
    format: 'yyyy-mm-dd',
    autoclose: 'true',
    todayHighlight: 'true',
    });
$('#id_time').runner({
    milliseconds: false,
});
$('#startButton').click(function() {
    $('#id_time').runner('start');
});
$('#stopButton').click(function() {
    $('#id_time').runner('stop');
});
});
{% endblock %}
